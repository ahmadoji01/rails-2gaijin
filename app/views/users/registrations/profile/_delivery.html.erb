<div class="tab-pane active" id="delivery-order" role="tabpanel" aria-labelledby="delivery-order">
    <div class="mb-2">
        <a href="<%= order_delivery_url %>" class="btn btn-primary btn-lg btn-icon icon-left"><i class="fa fa-plus"></i> Order New Delivery</a>
    </div>
    <hr>
    <div class="col-12 table-responsive">
        <table class="table">
            <thead style="color: none;">
                <tr>
                    <!-- <th scope="col">Product's Name</th> -->
                    <th class="text-center" width="300px">Destination</th>
                    <th class="text-center">Delivery Date</th>
                    <th class="text-center">Status</th>
                    <th class="text-center">Action</th>
                </tr>
            </thead>
            <tbody>
                <% @deliveries.each do |delivery| %>
                    <% if !delivery.name.nil? %>
                        <tr>
                            <td><p><% if !delivery.address.nil? %><%= delivery.address.full_address %> <%= delivery.address.apartment %><% end %></p></td>
                            <td class="text-center msg_time"><%= delivery.shipping_date %></td>
                            <td class="text-center">
                                <% if delivery.processed? %>
                                    <span class="badge badge-warning">Processed</span>
                                <% elsif delivery.waiting_confirmation? %>
                                    <span class="badge badge-warning">Waiting Confirmation</span>
                                <% elsif delivery.waiting_payment? %>
                                    <span class="badge badge-warning">Waiting Payment</span>
                                <% elsif delivery.complete? %>
                                    <span class="badge badge-success">Completed</span>    
                                <% end %>
                            </td>
                            <td>
                                <center>
                                    <% if delivery.waiting_payment? %>
                                        <% if delivery.payment_method_cd == 3 %>
                                            <%= link_to checkout_create_path(id: delivery.id, price: delivery.price), method: :post, remote: true do %>
                                                <button class="btn btn-outline-primary btn-icon icon-left"><i class="fas fa-money-bill-wave"></i> Pay Now</button>
                                            <% end %>
                                        <% elsif delivery.payment_method_cd == 2 %>
                                            <%= link_to checkout_create_source_path(id: delivery.id, price: delivery.price), method: :post do %>
                                                <button class="btn btn-outline-primary btn-icon icon-left"><i class="fas fa-money-bill-wave"></i> Pay Now</button>
                                            <% end %>
                                        <% end %>
                                    <% elsif delivery.waiting_confirmation? %>
                                        <%= link_to delivery, method: :delete, data: { confirm: 'Are you sure?' } do %>
                                            <button class="btn btn-outline-danger btn-icon icon-left"><i class="fa fa-trash"></i> Cancel</button>
                                        <% end %>
                                    <% end %>
                                </center>
                            </td>
                        </tr>
                        <% if delivery.waiting_confirmation? %>
                            <%= render 'common/edit_delivery_modal', delivery: delivery %>
                        <% end %>
                    <% end %>
                <% end %>
            </tbody>
        </table>
        <hr>
    </div>                                
</div>
